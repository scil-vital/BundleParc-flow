profiles {
    docker {
        docker.enabled          = true
        conda.enabled           = false
        singularity.enabled     = false
        podman.enabled          = false
        shifter.enabled         = false
        charliecloud.enabled    = false
        apptainer.enabled       = false
        docker.runOptions       = '-u $(id -u):$(id -g) --gpus all'
    }
}

manifest {
    name            = 'scilus/nf-neuro-tutorial'
    description     = """nf-neuro-tutorial is a Nextflow pipeline for processing neuroimaging data."""
    version         = '0.1dev'
}

params.fodf = false
params.dwi = false
params.checkpoint = false
params.output     = 'result'

// ** Subworkflow params ** 
params.nb_pts = 10

process {
    publishDir = { "${params.output}/$meta.id/${task.process.replaceAll(':', '-')}" }

    withName: "BUNDLE_BUNDLEPARC" {
        ext.nb_pts = params.nb_pts
    }
		withName: "RECONST_DTIMETRICS" {
        ext.ad                  = false 
        ext.evecs               = false 
        ext.evals               = false 
        ext.fa                  = true
        ext.ga                  = false 
        ext.rgb                 = false 
        ext.md                  = true
        ext.mode                = false 
        ext.norm                = false 
        ext.rd                  = false 
        ext.tensor              = false 
        ext.nonphysical         = false 
        ext.pulsation           = false 
        ext.residual            = false 
    }
}
